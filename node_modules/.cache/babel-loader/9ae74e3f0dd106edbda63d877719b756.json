{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jimenagomezgarcia/Downloads/gifosjimenagomezg/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/jimenagomezgarcia/Downloads/gifosjimenagomezg/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/jimenagomezgarcia/Downloads/gifosjimenagomezg/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/Users/jimenagomezgarcia/Downloads/gifosjimenagomezg/src/Components/Header/Componentes/Busqueda.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { GifosContext } from \"../../../Context/GifosContext\";\nimport \"../../../Styles/Busqueda.css\";\nimport { URLAPI, KEYAPI, RESOURCES, LIMITS } from \"../../../Utilities/Constants\";\nimport ilustracionHeader from \"../../../images/ilustra_header.svg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar searchUrl = \"\".concat(URLAPI).concat(RESOURCES.search, \"?api_key=\").concat(KEYAPI);\nexport default function Busqueda(_ref) {\n  _s();\n\n  var _this = this;\n\n  var setGif = _ref.setGif;\n\n  //valor del boton de busqueda, se actualiza en cada onChange//\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      search = _useState2[0],\n      setSearch = _useState2[1]; //Autocomplete - palabra//\n\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      suggestion = _useState4[0],\n      setsuggestion = _useState4[1]; //Loading - Error\n\n\n  var _useContext = useContext(GifosContext),\n      setLoading = _useContext.setLoading,\n      setError = _useContext.setError; // Menu autocomplete\n\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      showmenu = _useState6[0],\n      setShowMenu = _useState6[1];\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var generadorUrl, peticion, data;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(search !== \"\")) {\n                _context.next = 21;\n                break;\n              }\n\n              generadorUrl = \"\".concat(searchUrl, \"&limit=\").concat(LIMITS.limit_12, \"&rating=g&q=\").concat(search);\n              _context.prev = 2;\n              _context.next = 5;\n              return fetch(generadorUrl);\n\n            case 5:\n              peticion = _context.sent;\n              setLoading(true);\n              _context.next = 9;\n              return peticion.json();\n\n            case 9:\n              data = _context.sent;\n\n              //console.log(data);\n              if (data.data.length === 0) {\n                setError(true);\n                setGif([]);\n              } else {\n                setGif(data.data);\n                setError(false);\n              }\n\n              _context.next = 16;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](2);\n              console.error(_context.t0);\n\n            case 16:\n              _context.prev = 16;\n              setLoading(false);\n              return _context.finish(16);\n\n            case 19:\n              _context.next = 22;\n              break;\n\n            case 21:\n              setGif([]);\n\n            case 22:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 13, 16, 19]]);\n    }));\n\n    return function handleSubmit() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var autocomplete = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var urlKey, peticion, data;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              urlKey = \"\".concat(URLAPI).concat(RESOURCES.autocomplete, \"?api_key=\").concat(KEYAPI, \"&q=\").concat(search, \"&limit=\").concat(LIMITS.limit_5);\n              _context2.prev = 1;\n              _context2.next = 4;\n              return fetch(urlKey);\n\n            case 4:\n              peticion = _context2.sent;\n              _context2.next = 7;\n              return peticion.json();\n\n            case 7:\n              data = _context2.sent;\n              //console.log(data);\n              setsuggestion(data.data);\n              _context2.next = 14;\n              break;\n\n            case 11:\n              _context2.prev = 11;\n              _context2.t0 = _context2[\"catch\"](1);\n              console.error(_context2.t0);\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 11]]);\n    }));\n\n    return function autocomplete() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleClickOption = function handleClickOption(item) {\n    setSearch(item.name);\n    setShowMenu(false);\n  };\n\n  var handleInput = function handleInput(e) {\n    setSearch(e.target.value);\n    setShowMenu(true);\n  };\n\n  useEffect(function () {\n    //handleSubmit();\n    autocomplete();\n  }, [search]);\n  return /*#__PURE__*/_jsxDEV(\"header\", {\n    className: \"contenedorBusqueda\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"tituloPrincipal\",\n      children: [\"\\xA1Inspirate y busca los mejores \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"GIFS!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 40\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: ilustracionheader,\n      alt: \"ilustracionheader\",\n      width: \"399px\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"barraDeBusqueda\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: search,\n        onChange: handleInput,\n        placeholder: \"Busca gifs\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"listaItems\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: suggestion.map(function (item, index) {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"\".concat(showmenu ? \"listaItemsVisible\" : \"listaItemsInvisible\"),\n              onClick: function onClick() {\n                return handleClickOption(item);\n              },\n              children: item.name\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 17\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSubmit,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"iconoLupa\",\n          src: \"../../../images/icon-search-mod-noc.svg\",\n          alt: \"iconoSearch\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Busqueda, \"YviyBj5US6CDtUDxqD3bFJTTlLg=\");\n\n_c = Busqueda;\n\nvar _c;\n\n$RefreshReg$(_c, \"Busqueda\");","map":{"version":3,"names":["React","useState","useEffect","useContext","GifosContext","URLAPI","KEYAPI","RESOURCES","LIMITS","searchUrl","search","Busqueda","setGif","setSearch","suggestion","setsuggestion","setLoading","setError","showmenu","setShowMenu","handleSubmit","generadorUrl","limit_12","fetch","peticion","json","data","length","console","error","autocomplete","urlKey","limit_5","handleClickOption","item","name","handleInput","e","target","value","ilustracionheader","map","index"],"sources":["/Users/jimenagomezgarcia/Downloads/gifosjimenagomezg/src/Components/Header/Componentes/Busqueda.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { GifosContext } from \"../../../Context/GifosContext\";\nimport \"../../../Styles/Busqueda.css\";\nimport {\n  URLAPI,\n  KEYAPI,\n  RESOURCES,\n  LIMITS,\n} from \"../../../Utilities/Constants\";\nimport ilustracionHeader from \"../../../images/ilustra_header.svg\";\n\nconst searchUrl = `${URLAPI}${RESOURCES.search}?api_key=${KEYAPI}`;\n\nexport default function Busqueda({ setGif }) {\n  //valor del boton de busqueda, se actualiza en cada onChange//\n  const [search, setSearch] = useState(\"\");\n  //Autocomplete - palabra//\n  const [suggestion, setsuggestion] = useState([]);\n  //Loading - Error\n  const { setLoading, setError } = useContext(GifosContext);\n  // Menu autocomplete\n  const [showmenu, setShowMenu] = useState(true);\n\n  const handleSubmit = async () => {\n    if (search !== \"\") {\n      const generadorUrl = `${searchUrl}&limit=${LIMITS.limit_12}&rating=g&q=${search}`;\n      try {\n        let peticion = await fetch(generadorUrl);\n        setLoading(true);\n        const data = await peticion.json();\n        //console.log(data);\n        if (data.data.length === 0) {\n          setError(true);\n          setGif([]);\n        } else {\n          setGif(data.data);\n          setError(false);\n        }\n      } catch (err) {\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    } else {\n      setGif([]);\n    }\n  };\n\n  const autocomplete = async () => {\n    const urlKey = `${URLAPI}${RESOURCES.autocomplete}?api_key=${KEYAPI}&q=${search}&limit=${LIMITS.limit_5}`;\n    try {\n      let peticion = await fetch(urlKey);\n      const data = await peticion.json();\n      //console.log(data);\n      setsuggestion(data.data);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const handleClickOption = (item) => {\n    setSearch(item.name);\n    setShowMenu(false);\n  };\n\n  const handleInput = (e) => {\n    setSearch(e.target.value);\n    setShowMenu(true);\n  };\n\n  useEffect(() => {\n    //handleSubmit();\n    autocomplete();\n  }, [search]);\n\n  return (\n    <header className=\"contenedorBusqueda\">\n      <h1 className=\"tituloPrincipal\">\n        ¡Inspirate y busca los mejores <strong>GIFS!</strong>\n      </h1>\n      <img src={ilustracionheader} alt=\"ilustracionheader\" width=\"399px\" />\n      <div className=\"barraDeBusqueda\">\n        <input\n          type=\"text\"\n          value={search}\n          onChange={handleInput}\n          placeholder=\"Busca gifs\"\n        />\n        <div className=\"listaItems\">\n          <ul>\n            {suggestion.map((item, index) => {\n              return (\n                <li\n                  key={index}\n                  className={`${\n                    showmenu ? \"listaItemsVisible\" : \"listaItemsInvisible\"\n                  }`}\n                  onClick={() => handleClickOption(item)}\n                >\n                  {item.name}\n                </li>\n              );\n            })}\n          </ul>\n        </div>\n        <button onClick={handleSubmit}>\n          <img\n            className=\"iconoLupa\"\n            src=\"../../../images/icon-search-mod-noc.svg\"\n            alt=\"iconoSearch\"\n          />\n        </button>\n      </div>\n    </header>\n  );\n}\n"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,SAASC,YAAT,QAA6B,+BAA7B;AACA,OAAO,8BAAP;AACA,SACEC,MADF,EAEEC,MAFF,EAGEC,SAHF,EAIEC,MAJF,QAKO,8BALP;;;AAQA,IAAMC,SAAS,aAAMJ,MAAN,SAAeE,SAAS,CAACG,MAAzB,sBAA2CJ,MAA3C,CAAf;AAEA,eAAe,SAASK,QAAT,OAA8B;EAAA;;EAAA;;EAAA,IAAVC,MAAU,QAAVA,MAAU;;EAC3C;EACA,gBAA4BX,QAAQ,CAAC,EAAD,CAApC;EAAA;EAAA,IAAOS,MAAP;EAAA,IAAeG,SAAf,iBAF2C,CAG3C;;;EACA,iBAAoCZ,QAAQ,CAAC,EAAD,CAA5C;EAAA;EAAA,IAAOa,UAAP;EAAA,IAAmBC,aAAnB,iBAJ2C,CAK3C;;;EACA,kBAAiCZ,UAAU,CAACC,YAAD,CAA3C;EAAA,IAAQY,UAAR,eAAQA,UAAR;EAAA,IAAoBC,QAApB,eAAoBA,QAApB,CAN2C,CAO3C;;;EACA,iBAAgChB,QAAQ,CAAC,IAAD,CAAxC;EAAA;EAAA,IAAOiB,QAAP;EAAA,IAAiBC,WAAjB;;EAEA,IAAMC,YAAY;IAAA,uEAAG;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA,MACfV,MAAM,KAAK,EADI;gBAAA;gBAAA;cAAA;;cAEXW,YAFW,aAEOZ,SAFP,oBAE0BD,MAAM,CAACc,QAFjC,yBAEwDZ,MAFxD;cAAA;cAAA;cAAA,OAIMa,KAAK,CAACF,YAAD,CAJX;;YAAA;cAIXG,QAJW;cAKfR,UAAU,CAAC,IAAD,CAAV;cALe;cAAA,OAMIQ,QAAQ,CAACC,IAAT,EANJ;;YAAA;cAMTC,IANS;;cAOf;cACA,IAAIA,IAAI,CAACA,IAAL,CAAUC,MAAV,KAAqB,CAAzB,EAA4B;gBAC1BV,QAAQ,CAAC,IAAD,CAAR;gBACAL,MAAM,CAAC,EAAD,CAAN;cACD,CAHD,MAGO;gBACLA,MAAM,CAACc,IAAI,CAACA,IAAN,CAAN;gBACAT,QAAQ,CAAC,KAAD,CAAR;cACD;;cAdc;cAAA;;YAAA;cAAA;cAAA;cAgBfW,OAAO,CAACC,KAAR;;YAhBe;cAAA;cAkBfb,UAAU,CAAC,KAAD,CAAV;cAlBe;;YAAA;cAAA;cAAA;;YAAA;cAqBjBJ,MAAM,CAAC,EAAD,CAAN;;YArBiB;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAH;;IAAA,gBAAZQ,YAAY;MAAA;IAAA;EAAA,GAAlB;;EAyBA,IAAMU,YAAY;IAAA,uEAAG;MAAA;MAAA;QAAA;UAAA;YAAA;cACbC,MADa,aACD1B,MADC,SACQE,SAAS,CAACuB,YADlB,sBAC0CxB,MAD1C,gBACsDI,MADtD,oBACsEF,MAAM,CAACwB,OAD7E;cAAA;cAAA;cAAA,OAGIT,KAAK,CAACQ,MAAD,CAHT;;YAAA;cAGbP,QAHa;cAAA;cAAA,OAIEA,QAAQ,CAACC,IAAT,EAJF;;YAAA;cAIXC,IAJW;cAKjB;cACAX,aAAa,CAACW,IAAI,CAACA,IAAN,CAAb;cANiB;cAAA;;YAAA;cAAA;cAAA;cAQjBE,OAAO,CAACC,KAAR;;YARiB;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAH;;IAAA,gBAAZC,YAAY;MAAA;IAAA;EAAA,GAAlB;;EAYA,IAAMG,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,IAAD,EAAU;IAClCrB,SAAS,CAACqB,IAAI,CAACC,IAAN,CAAT;IACAhB,WAAW,CAAC,KAAD,CAAX;EACD,CAHD;;EAKA,IAAMiB,WAAW,GAAG,SAAdA,WAAc,CAACC,CAAD,EAAO;IACzBxB,SAAS,CAACwB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAT;IACApB,WAAW,CAAC,IAAD,CAAX;EACD,CAHD;;EAKAjB,SAAS,CAAC,YAAM;IACd;IACA4B,YAAY;EACb,CAHQ,EAGN,CAACpB,MAAD,CAHM,CAAT;EAKA,oBACE;IAAQ,SAAS,EAAC,oBAAlB;IAAA,wBACE;MAAI,SAAS,EAAC,iBAAd;MAAA,8DACiC;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADjC;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,eAIE;MAAK,GAAG,EAAE8B,iBAAV;MAA6B,GAAG,EAAC,mBAAjC;MAAqD,KAAK,EAAC;IAA3D;MAAA;MAAA;MAAA;IAAA,QAJF,eAKE;MAAK,SAAS,EAAC,iBAAf;MAAA,wBACE;QACE,IAAI,EAAC,MADP;QAEE,KAAK,EAAE9B,MAFT;QAGE,QAAQ,EAAE0B,WAHZ;QAIE,WAAW,EAAC;MAJd;QAAA;QAAA;QAAA;MAAA,QADF,eAOE;QAAK,SAAS,EAAC,YAAf;QAAA,uBACE;UAAA,UACGtB,UAAU,CAAC2B,GAAX,CAAe,UAACP,IAAD,EAAOQ,KAAP,EAAiB;YAC/B,oBACE;cAEE,SAAS,YACPxB,QAAQ,GAAG,mBAAH,GAAyB,qBAD1B,CAFX;cAKE,OAAO,EAAE;gBAAA,OAAMe,iBAAiB,CAACC,IAAD,CAAvB;cAAA,CALX;cAAA,UAOGA,IAAI,CAACC;YAPR,GACOO,KADP;cAAA;cAAA;cAAA;YAAA,SADF;UAWD,CAZA;QADH;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QAPF,eAwBE;QAAQ,OAAO,EAAEtB,YAAjB;QAAA,uBACE;UACE,SAAS,EAAC,WADZ;UAEE,GAAG,EAAC,yCAFN;UAGE,GAAG,EAAC;QAHN;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QAxBF;IAAA;MAAA;MAAA;MAAA;IAAA,QALF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAwCD;;GAtGuBT,Q;;KAAAA,Q"},"metadata":{},"sourceType":"module"}