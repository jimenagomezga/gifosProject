{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jimenagomezgarcia/Downloads/gifosjimenagomezg/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jimenagomezgarcia/Downloads/gifosjimenagomezg/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jimenagomezgarcia/Downloads/gifosjimenagomezg/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from\"react\";import{GifosContext}from\"../../../Context/GifosContext\";import\"../../../Styles/Busqueda.css\";import{URLAPI,KEYAPI,RESOURCES,LIMITS}from\"../../../Utilities/Constants\";import ilustracionHeader from\"../../../images/ilustra_header.svg\";import lupaIcon from\"../../../images/icon-search-mod-noc.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var searchUrl=\"\".concat(URLAPI).concat(RESOURCES.search,\"?api_key=\").concat(KEYAPI);export default function Busqueda(_ref){var setGif=_ref.setGif;//valor del boton de busqueda, se actualiza en cada onChange//\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];//Autocomplete - palabra//\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),suggestion=_useState4[0],setsuggestion=_useState4[1];//Loading - Error\nvar _useContext=useContext(GifosContext),setLoading=_useContext.setLoading,setError=_useContext.setError;// Menu autocomplete\nvar _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),showmenu=_useState6[0],setShowMenu=_useState6[1];var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var generadorUrl,peticion,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(search!==\"\")){_context.next=21;break;}generadorUrl=\"\".concat(searchUrl,\"&limit=\").concat(LIMITS.limit_12,\"&rating=g&q=\").concat(search);_context.prev=2;_context.next=5;return fetch(generadorUrl);case 5:peticion=_context.sent;setLoading(true);_context.next=9;return peticion.json();case 9:data=_context.sent;//console.log(data);\nif(data.data.length===0){setError(true);setGif([]);}else{setGif(data.data);setError(false);}_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);console.error(_context.t0);case 16:_context.prev=16;setLoading(false);return _context.finish(16);case 19:_context.next=22;break;case 21:setGif([]);case 22:case\"end\":return _context.stop();}}},_callee,null,[[2,13,16,19]]);}));return function handleSubmit(){return _ref2.apply(this,arguments);};}();var autocomplete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var urlKey,peticion,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:urlKey=\"\".concat(URLAPI).concat(RESOURCES.autocomplete,\"?api_key=\").concat(KEYAPI,\"&q=\").concat(search,\"&limit=\").concat(LIMITS.limit_5);_context2.prev=1;_context2.next=4;return fetch(urlKey);case 4:peticion=_context2.sent;_context2.next=7;return peticion.json();case 7:data=_context2.sent;//console.log(data);\nsetsuggestion(data.data);_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);console.error(_context2.t0);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,11]]);}));return function autocomplete(){return _ref3.apply(this,arguments);};}();var handleClickOption=function handleClickOption(item){setSearch(item.name);setShowMenu(false);};var handleInput=function handleInput(e){setSearch(e.target.value);setShowMenu(true);};useEffect(function(){//handleSubmit();\nautocomplete();},[search]);return/*#__PURE__*/_jsxs(\"header\",{className:\"contenedorBusqueda\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"tituloPrincipal\",children:[\"\\xA1Inspirate y busca los mejores \",/*#__PURE__*/_jsx(\"strong\",{children:\"GIFS!\"})]}),/*#__PURE__*/_jsx(\"img\",{src:ilustracionHeader,alt:\"ilustracionheader\",width:\"399px\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"barraDeBusqueda\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:search,onChange:handleInput,placeholder:\"Busca gifs\"}),/*#__PURE__*/_jsx(\"div\",{className:\"listaItems\",children:/*#__PURE__*/_jsx(\"ul\",{children:suggestion.map(function(item,index){return/*#__PURE__*/_jsx(\"li\",{className:\"\".concat(showmenu?\"listaItemsVisible\":\"listaItemsInvisible\"),onClick:function onClick(){return handleClickOption(item);},children:item.name},index);})})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:/*#__PURE__*/_jsx(\"img\",{className:\"iconoLupa\",src:lupaIcon,alt:\"iconoSearch\"})})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useContext","GifosContext","URLAPI","KEYAPI","RESOURCES","LIMITS","searchUrl","search","Busqueda","setGif","setSearch","suggestion","setsuggestion","setLoading","setError","showmenu","setShowMenu","handleSubmit","generadorUrl","limit_12","fetch","peticion","json","data","length","console","error","autocomplete","urlKey","limit_5","handleClickOption","item","name","handleInput","e","target","value","ilustracionHeader","map","index","lupaIcon"],"sources":["/Users/jimenagomezgarcia/Downloads/gifosjimenagomezg/src/Components/Header/Componentes/Busqueda.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { GifosContext } from \"../../../Context/GifosContext\";\nimport \"../../../Styles/Busqueda.css\";\nimport {\n  URLAPI,\n  KEYAPI,\n  RESOURCES,\n  LIMITS,\n} from \"../../../Utilities/Constants\";\nimport ilustracionHeader from \"../../../images/ilustra_header.svg\";\nimport lupaIcon from \"../../../images/icon-search-mod-noc.svg\";\n\nconst searchUrl = `${URLAPI}${RESOURCES.search}?api_key=${KEYAPI}`;\n\nexport default function Busqueda({ setGif }) {\n  //valor del boton de busqueda, se actualiza en cada onChange//\n  const [search, setSearch] = useState(\"\");\n  //Autocomplete - palabra//\n  const [suggestion, setsuggestion] = useState([]);\n  //Loading - Error\n  const { setLoading, setError } = useContext(GifosContext);\n  // Menu autocomplete\n  const [showmenu, setShowMenu] = useState(true);\n\n  const handleSubmit = async () => {\n    if (search !== \"\") {\n      const generadorUrl = `${searchUrl}&limit=${LIMITS.limit_12}&rating=g&q=${search}`;\n      try {\n        let peticion = await fetch(generadorUrl);\n        setLoading(true);\n        const data = await peticion.json();\n        //console.log(data);\n        if (data.data.length === 0) {\n          setError(true);\n          setGif([]);\n        } else {\n          setGif(data.data);\n          setError(false);\n        }\n      } catch (err) {\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    } else {\n      setGif([]);\n    }\n  };\n\n  const autocomplete = async () => {\n    const urlKey = `${URLAPI}${RESOURCES.autocomplete}?api_key=${KEYAPI}&q=${search}&limit=${LIMITS.limit_5}`;\n    try {\n      let peticion = await fetch(urlKey);\n      const data = await peticion.json();\n      //console.log(data);\n      setsuggestion(data.data);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const handleClickOption = (item) => {\n    setSearch(item.name);\n    setShowMenu(false);\n  };\n\n  const handleInput = (e) => {\n    setSearch(e.target.value);\n    setShowMenu(true);\n  };\n\n  useEffect(() => {\n    //handleSubmit();\n    autocomplete();\n  }, [search]);\n\n  return (\n    <header className=\"contenedorBusqueda\">\n      <h1 className=\"tituloPrincipal\">\n        Â¡Inspirate y busca los mejores <strong>GIFS!</strong>\n      </h1>\n      <img src={ilustracionHeader} alt=\"ilustracionheader\" width=\"399px\" />\n      <div className=\"barraDeBusqueda\">\n        <input\n          type=\"text\"\n          value={search}\n          onChange={handleInput}\n          placeholder=\"Busca gifs\"\n        />\n        <div className=\"listaItems\">\n          <ul>\n            {suggestion.map((item, index) => {\n              return (\n                <li\n                  key={index}\n                  className={`${\n                    showmenu ? \"listaItemsVisible\" : \"listaItemsInvisible\"\n                  }`}\n                  onClick={() => handleClickOption(item)}\n                >\n                  {item.name}\n                </li>\n              );\n            })}\n          </ul>\n        </div>\n        <button onClick={handleSubmit}>\n          <img className=\"iconoLupa\" src={lupaIcon} alt=\"iconoSearch\" />\n        </button>\n      </div>\n    </header>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}